<!doctype html><html lang=en><head><meta name=viewport content="width=device-width,initial-scale=1"><title>One Nano Request</title>
<meta charset=utf-8><meta name=description content="Ladder@Websocket request 一般由网关节点向外部暴露n.ClientAddr地址并监听，接收客户端发送的请求。以websocket请求为例。listenAndSer"><meta name=author content="Axlrose"><link rel=canonical href=https://echotrue.github.io/blog/game/nano/one-nano-request/><link rel=alternate type=application/rss+xml href=https://echotrue.github.io//index.xml title=AXLROSE><meta property="og:url" content="https://echotrue.github.io/blog/game/nano/one-nano-request/"><meta property="og:site_name" content="AXLROSE"><meta property="og:title" content="One Nano Request"><meta property="og:description" content="Websocket request 一般由网关节点向外部暴露n.ClientAddr地址并监听，接收客户端发送的请求。以websocket请求为例。listenAndSer"><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="blog"><meta property="article:published_time" content="2021-08-31T16:57:22+08:00"><meta property="article:modified_time" content="2021-08-31T16:57:22+08:00"><meta property="article:tag" content="Nano"><meta property="og:see_also" content="https://echotrue.github.io/blog/game/nano/nano-start/"><meta property="og:see_also" content="https://echotrue.github.io/blog/game/nano/nano-binary-protocol/"><meta property="og:see_also" content="https://echotrue.github.io/blog/game/nano/nano/"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Blog","item":"https://echotrue.github.io/blog/"},{"@type":"ListItem","position":2,"name":"One Nano Request","item":"https://echotrue.github.io/blog/game/nano/one-nano-request/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"One Nano Request","name":"One Nano Request","description":"Websocket request 一般由网关节点向外部暴露n.ClientAddr地址并监听，接收客户端发送的请求。以websocket请求为例。listenAndSer","keywords":["nano"],"articleBody":"Websocket request 一般由网关节点向外部暴露n.ClientAddr地址并监听，接收客户端发送的请求。以websocket请求为例。listenAndServeWS方法负责监听n.ClientAddr并接收ws请求。接收到请求后交给节点下的LocalHandler的handleWs()方法，handleWs()会对连接对象封装成wsConn类型，结构如下：\ntype wsConn struct { conn *websocket.Conn typ int // message type reader io.Reader } 然后开辟一个新的goroutine（LocalHandler.handle()方法）从连接中持续读取数据。\nLocalHandler.handle() 实例化一个Agent对象，相当于User Agent。它对应一个用户代理，用来存储原始连接信息。\nagent struct { // regular agent member session *session.Session // session会话 conn net.Conn // low-level conn fd lastMid uint64 // last message id state int32 // current agent state chDie chan struct{} // wait for close chSend chan pendingMessage // push message queue lastAt int64 // last heartbeat unix time stamp decoder *codec.Decoder // binary decoder pipeline pipeline.Pipeline rpcHandler rpcHandler srv reflect.Value // cached session reflect.Value } 保存当前会话到当前节点。然后开辟一个goroutine监听channel消息。监听的消息类型如下：\n\u003c-ticker.C类型。每隔30秒检测上一次心跳包的时间距离现在是否超过60秒，如果没超过则发送心跳包响应数据hbd到chWrite通道。反之，则return跳出当前for...select.进而执行defer延迟函数： defer func() { ticker.Stop() //停止心跳包检测定时器 close(a.chSend) //关闭推送消息队列 close(chWrite) a.Close() //关闭当前User Agent if env.Debug { log.Println(fmt.Sprintf(\"Session write goroutine exit, SessionID=%d, UID=%d\", a.session.ID(), a.session.UID())) } }() \u003c-chWrite类型。主要接收心跳包响应数据，并响应数据到客户端。 \u003c-a.chSend类型。处理推送数据 \u003c-a.chDie类型。 \u003c-env.Die类型。应用退出通知 接着，循环从当前连接中读取网络数据包，并由LocalHandler.processPacket()方法根据网络数据包的类型处理消息。网络数据包有以下类型：\nHandshake = 0x01 表示握手：请求（客户端）\u003c===\u003e握手响应（服务端） HandshakeAck = 0x02 表示从客户端到服务端的握手确认 Heartbeat = 0x03 心跳数据包 Data = 0x04 通用数据包 Kick = 0x05 disconnect message from server 其中通用数据包是message.Message类型的。message的类型包含：Request/Notify/Response/Push。分别代表请求/通知/响应/推送。\nHandshake和HandshakeAck类型分别为设置当前UserAgent的状态为statusHandshake和statusWorking.Data类型数据会解码数据包中的Data字段并交给processMessage()处理。然后更新agent.lastAt为当前时间。\n循环读取消息失败时，会执行defer延迟函数。依次通知其他节点当前连接关闭。然后关闭当前连接。\nLocalHandler.processMessage() 判断message.Route是否是本地服务列表中。如果是本地服务进入localProcess() 反之进入remoteProcess()。\n先看localProcess()\n","wordCount":"1183","inLanguage":"en","datePublished":"2021-08-31T16:57:22+08:00","dateModified":"2021-08-31T16:57:22+08:00","author":{"@type":"Person","name":"Axlrose"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://echotrue.github.io/blog/game/nano/one-nano-request/"},"publisher":{"@type":"Organization","name":"AXLROSE","logo":{"@type":"ImageObject","url":"https://echotrue.github.io/favicon.ico"}}}</script><link rel=icon href=/images/avatar.png sizes=16x16><link rel=apple-touch-icon href=/images/avatar.png><link rel=manifest href=/images/avatar.png><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/lxgw-wenkai-webfont@1.7.0/style.css><link rel=stylesheet href=/css/main.min.041a458015951c8bc9a981a7927109c808f4e247b9920f71ecf5cfd9125f6878.css integrity="sha256-BBpFgBWVHIvJqYGnknEJyAj04ke5kg9x7PXP2RJfaHg=" crossorigin=anonymous media=screen><link rel=stylesheet href=/scss/highlight/atom-one-dark.min.d51fd0897056947c1a907d5753da4b37e67f6c13b4ec4c836708e028a1b5687a.css><script src=/js/highlight.min.min.c607d6febd16934a82eb61d3a896ed9d869f54373cc63ce95864ed5488fe3128.js></script><script>hljs.highlightAll()</script><script>(()=>{var t=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,e=localStorage.getItem("theme");t&&e===null&&(localStorage.setItem("theme","dark"),document.documentElement.setAttribute("data-dark-mode","")),t&&e==="dark"&&document.documentElement.setAttribute("data-dark-mode",""),e==="dark"&&document.documentElement.setAttribute("data-dark-mode","")})()</script></head><body><main class=wrapper><nav class=navigation><section class=container><a class=navigation-brand href=/>HOME
</a><input type=checkbox id=menu-toggle>
<label class="menu-button float-right" for=menu-toggle><span></span><span></span><span></span></label><ul class=navigation-list id=navigation-list><li class="navigation-item navigation-menu"><a class=navigation-link href=/blog>Blog</a></li><li class="navigation-item navigation-menu"><a class=navigation-link href=/series>Series</a></li><li class="navigation-item navigation-menu"><a class=navigation-link href=/tags>Tags</a></li><li class="navigation-item navigation-menu"><a class=navigation-link href=/archives>Archive</a></li><li class="navigation-item navigation-menu"><a class=navigation-link href=/book>Book</a></li><li class="navigation-item menu-separator"><span>|</span></li><li class="navigation-item navigation-social"><a class=navigation-link href=https://github.com><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77 5.44 5.44.0 003.5 8.55c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg></a></li><li class="navigation-item navigation-dark"><button id=mode type=button aria-label="toggle user light or dark theme">
<span class=toggle-dark><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-moon"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg></span>
<span class=toggle-light><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-sun"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></span></button></li></ul></section></nav><div id=content><article class=blog-single><header class=blog-title><h1>One Nano Request</h1></header><p><small>August 31, 2021&nbsp;· 1183 words&nbsp;· 3 min</small>
<small>·
<a href=https://echotrue.github.io/tags/nano/>Nano</a></small><p><div class=blog-toc><nav id=TableOfContents><ul><li><a href=#websocket-request>Websocket request</a><ul><li><a href=#localhandlerhandle>LocalHandler.handle()</a></li><li><a href=#localhandlerprocessmessage>LocalHandler.processMessage()</a></li></ul></li></ul></nav></div><section class=blog-content><h2 id=websocket-request>Websocket request</h2><p>一般由网关节点向外部暴露<code>n.ClientAddr</code>地址并监听，接收客户端发送的请求。以<code>websocket</code>请求为例。<code>listenAndServeWS</code>方法负责监听<code>n.ClientAddr</code>并接收<code>ws</code>请求。接收到请求后交给节点下的<code>LocalHandler</code>的<code>handleWs()</code>方法，<code>handleWs()</code>会对连接对象封装成<code>wsConn</code>类型，结构如下：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Go data-lang=Go><span style=display:flex><span><span style=color:#66d9ef>type</span> <span style=color:#a6e22e>wsConn</span> <span style=color:#66d9ef>struct</span> {  
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>conn</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>websocket</span>.<span style=color:#a6e22e>Conn</span>  
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>typ</span> <span style=color:#66d9ef>int</span> <span style=color:#75715e>// message type  
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	<span style=color:#a6e22e>reader</span> <span style=color:#a6e22e>io</span>.<span style=color:#a6e22e>Reader</span>  
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>然后开辟一个新的<code>goroutine</code>（<code>LocalHandler.handle()</code>方法）从连接中持续读取数据。</p><h3 id=localhandlerhandle>LocalHandler.handle()</h3><p>实例化一个<code>Agent</code>对象，相当于<code>User Agent</code>。它对应一个用户代理，用来存储原始连接信息。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Go data-lang=Go><span style=display:flex><span><span style=color:#a6e22e>agent</span> <span style=color:#66d9ef>struct</span> {  
</span></span><span style=display:flex><span>	<span style=color:#75715e>// regular agent member 
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	<span style=color:#a6e22e>session</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>session</span>.<span style=color:#a6e22e>Session</span> <span style=color:#75715e>// session会话
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	<span style=color:#a6e22e>conn</span> <span style=color:#a6e22e>net</span>.<span style=color:#a6e22e>Conn</span> <span style=color:#75715e>// low-level conn fd 
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	<span style=color:#a6e22e>lastMid</span> <span style=color:#66d9ef>uint64</span> <span style=color:#75715e>// last message id
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	<span style=color:#a6e22e>state</span> <span style=color:#66d9ef>int32</span> <span style=color:#75715e>// current agent state
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	<span style=color:#a6e22e>chDie</span> <span style=color:#66d9ef>chan</span> <span style=color:#66d9ef>struct</span>{} <span style=color:#75715e>// wait for close  
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	<span style=color:#a6e22e>chSend</span> <span style=color:#66d9ef>chan</span> <span style=color:#a6e22e>pendingMessage</span> <span style=color:#75715e>// push message queue  
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	<span style=color:#a6e22e>lastAt</span> <span style=color:#66d9ef>int64</span> <span style=color:#75715e>// last heartbeat unix time stamp  
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	<span style=color:#a6e22e>decoder</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>codec</span>.<span style=color:#a6e22e>Decoder</span> <span style=color:#75715e>// binary decoder  
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	<span style=color:#a6e22e>pipeline</span> <span style=color:#a6e22e>pipeline</span>.<span style=color:#a6e22e>Pipeline</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>rpcHandler</span> <span style=color:#a6e22e>rpcHandler</span>  
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>srv</span> <span style=color:#a6e22e>reflect</span>.<span style=color:#a6e22e>Value</span> <span style=color:#75715e>// cached session reflect.Value  
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>}
</span></span></code></pre></div><p>保存当前会话到当前节点。然后开辟一个<code>goroutine</code>监听<code>channel</code>消息。监听的消息类型如下：</p><ul><li><code>&lt;-ticker.C</code>类型。每隔30秒检测上一次心跳包的时间距离现在是否超过60秒，如果没超过则发送心跳包响应数据<code>hbd</code>到<code>chWrite</code>通道。反之，则<code>return</code>跳出当前<code>for...select</code>.进而执行<code>defer</code>延迟函数：</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Go data-lang=Go><span style=display:flex><span><span style=color:#66d9ef>defer</span> <span style=color:#66d9ef>func</span>() {  
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>ticker</span>.<span style=color:#a6e22e>Stop</span>()  <span style=color:#75715e>//停止心跳包检测定时器
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	close(<span style=color:#a6e22e>a</span>.<span style=color:#a6e22e>chSend</span>)  <span style=color:#75715e>//关闭推送消息队列
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	close(<span style=color:#a6e22e>chWrite</span>)  
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>a</span>.<span style=color:#a6e22e>Close</span>()  <span style=color:#75715e>//关闭当前User Agent
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>env</span>.<span style=color:#a6e22e>Debug</span> {  
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>log</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Sprintf</span>(<span style=color:#e6db74>&#34;Session write goroutine exit, SessionID=%d, UID=%d&#34;</span>, <span style=color:#a6e22e>a</span>.<span style=color:#a6e22e>session</span>.<span style=color:#a6e22e>ID</span>(), <span style=color:#a6e22e>a</span>.<span style=color:#a6e22e>session</span>.<span style=color:#a6e22e>UID</span>()))  
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>}()
</span></span></code></pre></div><ul><li><code>&lt;-chWrite</code>类型。主要接收心跳包响应数据，并响应数据到客户端。</li><li><code>&lt;-a.chSend</code>类型。处理推送数据</li><li><code>&lt;-a.chDie</code>类型。</li><li><code>&lt;-env.Die</code>类型。应用退出通知</li></ul><p>接着，循环从当前连接中读取网络数据包，并由<code>LocalHandler.processPacket()</code>方法根据网络数据包的类型处理消息。网络数据包有以下类型：</p><ul><li>Handshake = 0x01 表示握手：请求（客户端）&lt;===>握手响应（服务端）</li><li>HandshakeAck = 0x02 表示从客户端到服务端的握手确认</li><li>Heartbeat = 0x03 心跳数据包</li><li>Data = 0x04 通用数据包</li><li>Kick = 0x05 disconnect message from server</li></ul><p>其中通用数据包是<code>message.Message</code>类型的。<code>message</code>的类型包含：Request/Notify/Response/Push。分别代表请求/通知/响应/推送。</p><p><code>Handshake</code>和<code>HandshakeAck</code>类型分别为设置当前<code>UserAgent</code>的状态为<code>statusHandshake</code>和<code>statusWorking</code>.<code>Data</code>类型数据会解码数据包中的<code>Data</code>字段并交给<code>processMessage()</code>处理。然后更新<code>agent.lastAt</code>为当前时间。</p><p>循环读取消息失败时，会执行defer延迟函数。依次通知其他节点当前连接关闭。然后关闭当前连接。</p><h3 id=localhandlerprocessmessage>LocalHandler.processMessage()</h3><p>判断<code>message.Route</code>是否是本地服务列表中。如果是本地服务进入<code>localProcess()</code> 反之进入<code>remoteProcess()</code>。</p><p>先看<code>localProcess()</code></p></section><div class=paginator><a class=prev href=https://echotrue.github.io/blog/game/turn-based-game-with-go/><svg class="icon" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M3.77086 21.1546C11.0491 22.698 21.4339 21.7773 21.4339 16.3608V4.63375c0-.69413-.075800000000001-1.3284-.2422-1.86588M3.77086 21.1546C1.9934 20.7777.973585 18.7264 1.08749 16.688c.17931-3.209.06972-7.25665-.08236-10.47293C.87809 3.52811 3.12891 1.16316 5.51029 1.25008c4.25565.15534 9.86671-.04779 13.28091-.24466 1.2952-.074686 2.0494.62843 2.4005 1.76245M3.77086 21.1546C4.56586 21.4723 5.49168 21.7879 6.5 22.0658M21.1917 2.76787c1.918 1.4143 1.9383 9.65123 1.7087 13.59293-2.0526 7.6586-10.5943 7.3054-16.4004 5.705M21.1917 2.76787C21.7612 4.51192 22.7203 9.67216 22 16.3608 21.2797 23.0494 11.3665 22.9511 6.5 22.0658M9.94496 9C9.28897 9.61644 7.63215 10.997 6.04814 11.7966 5.98257 11.8297 5.98456 11.9753 6.05061 12.0063c1.00435.4716 2.8788 1.9201 3.89435 2.9937M6.44444 11.9667C8.86549 12.0608 14 12 16 11" stroke="currentcolor" stroke-linecap="round"/></svg>
<span>Turn-Based Game With Go【译】</span></a>
<a class=next href=https://echotrue.github.io/blog/game/nano/nano-start/><span>Nano Start</span><svg class="icon" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M3.77086 21.1546C11.0491 22.698 21.4339 21.7773 21.4339 16.3608V4.63375c0-.69413-.075800000000001-1.3284-.2422-1.86588M3.77086 21.1546C1.9934 20.7777.973585 18.7264 1.08749 16.688c.17931-3.209.06972-7.25665-.08236-10.47293C.87809 3.52811 3.12891 1.16316 5.51029 1.25008c4.25565.15534 9.86671-.04779 13.28091-.24466 1.2952-.074686 2.0494.62843 2.4005 1.76245M3.77086 21.1546C4.56586 21.4723 5.49168 21.7879 6.5 22.0658M21.1917 2.76787c1.918 1.4143 1.9383 9.65123 1.7087 13.59293-2.0526 7.6586-10.5943 7.3054-16.4004 5.705M21.1917 2.76787C21.7612 4.51192 22.7203 9.67216 22 16.3608 21.2797 23.0494 11.3665 22.9511 6.5 22.0658M12.055 9C12.711 9.61644 14.3679 10.997 15.9519 11.7966 16.0174 11.8297 16.0154 11.9753 15.9494 12.0063 14.945 12.4779 13.0706 13.9264 12.055 15m3.5006-3.0333C13.1345 12.0608 8 12 6 11" stroke="currentcolor" stroke-linecap="round"/></svg></a></div><div class=related-resources><h3>Related Resources</h3><nav><ul><li><a href=/blog/game/nano/nano-start/>Nano Start</a></li><li><a href=/blog/game/nano/nano-binary-protocol/>Nano Binary Protocol</a></li><li><a href=/blog/game/nano/nano/>Nano</a></li></ul></nav></div></article></div><footer class=footer><p>&copy; 2024 <a href=https://echotrue.github.io/>AXLROSE</a>
Powered by
<a href=https://gohugo.io/ rel=noopener target=_blank>Hugo️️</a>
Theme by
<a href=https://github.com/guangzhengli/hugo-theme-ladder rel=noopener target=_blank>Ladder</a>
️</p></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M10.5376 22.7916C11.0152 22.7207 22.5795 21.1781 22.0978 10.4211 22.0536 9.43274 21.9303 8.53367 21.7387 7.71865M10.5376 22.7916C16.876 22.3728 20.0969 19.8899 21.5383 16.9142M10.5376 22.7916C9.7707 22.9055 8.97982 22.8964 8.19743 22.7725M21.7387 7.71865C21.4988 6.69828 21.1518 5.80967 20.7188 5.04257m1.0199 2.67608C22.6022 10.1105 23.0542 13.7848 21.5383 16.9142M20.7188 5.04257c-3.5504-6.28886-12.88753-4.410077-16.44303.0C2.88063 6.77451-.0433281 11.1668 1.38159 16.6571c.89322 3.4417 3.7911 5.6365 6.81584 6.1154M20.7188 5.04257c1.3509 1.89783 3.3111 6.34223 1.6353 10.37273M21.5383 16.9142C21.8737 16.4251 22.1428 15.9235 22.3541 15.4153M8.19743 22.7725C12.1971 23.4683 20.6281 22.971 22.3541 15.4153M14 10.945C13.3836 10.289 12.003 8.63215 11.2034 7.04814 11.1703 6.98257 11.0247 6.98456 10.9937 7.05061 10.5221 8.05496 9.07362 9.92941 8 10.945m3.0333-3.50056C10.9392 9.86549 11 15 12 17" stroke="currentcolor" stroke-linecap="round"/></svg>
</a><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.querySelectorAll("pre > code").forEach(e=>{const s=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="Copy";function n(){t.innerHTML="Copied",setTimeout(()=>{t.innerHTML="Copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),n();return}const s=document.createRange();s.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(s);try{document.execCommand("copy"),n()}catch{}o.removeRange(s)}),e.parentNode.appendChild(t)})</script></main></body><script src=https://cdnjs.cloudflare.com/ajax/libs/medium-zoom/1.0.6/medium-zoom.min.js integrity="sha512-N9IJRoc3LaP3NDoiGkcPa4gG94kapGpaA5Zq9/Dr04uf5TbLFU5q0o8AbRhLKUUlp8QFS2u7S+Yti0U7QtuZvQ==" crossorigin=anonymous referrerpolicy=no-referrer></script><script>const images=Array.from(document.querySelectorAll(".blog-content img"));images.forEach(e=>{mediumZoom(e,{margin:10,scrollOffset:40,container:null,template:null,background:"rgba(0, 0, 0, 0.5)"})})</script><script src=/main.min.6bb26b69159420159c74dc9e097b06a578ed2b68c701466a91a44a9632d851bd0af167a1b30012387b4c512b48ad9ad4d3394e04d77ae38d57e1920fe4ed34fe.js integrity="sha512-a7JraRWUIBWcdNyeCXsGpXjtK2jHAUZqkaRKljLYUb0K8WehswASOHtMUStIrZrU0zlOBNd6441X4ZIP5O00/g==" crossorigin=anonymous defer></script></html>